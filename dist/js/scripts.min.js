"use strict";document.addEventListener("DOMContentLoaded",function(e){new ImageUploader});
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var ImageUploader=function(){function e(){_classCallCheck(this,e),this.elForm=document.querySelector("#image-uploader"),this.elFileInput=this.elForm.querySelector("#file_upload"),this.elSubmit=this.elForm.querySelector('input[type="submit"]'),this.elFileListImage=this.elForm.querySelector(".image-uploader__list.list--file-image"),this.elFileListSize=this.elForm.querySelector(".image-uploader__list.list--file-size"),this.state={files:[]},this.bindEvents()}return _createClass(e,[{key:"bindEvents",value:function(){var t=this;this.elForm.addEventListener("submit",function(e){}),this.elFileInput.addEventListener("change",function(e){t.state.files=t.elFileInput.files,t.validateInput()&&(t.elSubmit.classList.add("active"),t.clearLists(t.elFileListImage),t.clearLists(t.elFileListSize),t.createFileList(),t.elFileListImage.classList.add("active"),t.elFileListSize.classList.add("active"))})}},{key:"postInput",value:function(){var t=new FormData;Array.from(this.state.files).forEach(function(e){t.append("file_upload[]",e)});var e=new XMLHttpRequest;e.addEventListener("load",function(){console.log(e.response)}),e.open("POST","?action_submit"),e.send(t)}},{key:"validateInput",value:function(){var t=0;return Array.from(this.state.files).forEach(function(e){e.type.includes("image")||(t+=1)}),!t}},{key:"clearLists",value:function(e){Array.from(e.querySelector("ul").children).forEach(function(e){e.remove()})}},{key:"createFileList",value:function(){var l=this;Array.from(this.state.files).forEach(function(a){var e=new FileReader;e.readAsDataURL(a),e.onload=function(e){var i=new Image;i.src=e.target.result,i.onload=function(){a.width=i.width,a.height=i.height;var e=document.createElement("li"),t=document.createElement("li");e.innerText=a.name,t.innerHTML=(a.size/1024).toPrecision(5)+'<span class="byte-size">kilobytes | '.concat(a.width,"px x ").concat(a.height,"px</span>"),l.elFileListImage.querySelector("ul").appendChild(e),l.elFileListSize.querySelector("ul").appendChild(t)}}})}}]),e}();
//# sourceMappingURL=scripts.min.js.map
